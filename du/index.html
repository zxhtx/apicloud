<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width" />
  <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
  <title>Hello APP</title>
  <link rel="stylesheet" type="text/css" href="./css/api.css" />
  <style type="text/css">
  html,
  body {
    height: 100%;
    background-color: #fff;
  }

  .wrap {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-flex-flow: column;
  }

  header {
    height: 40px;
    width: 100%;
    text-align: center;
    background-color: #81a9c3;
    color: #fff;
    line-height: 44px;
    font-size: 20px;
  }
</style>
</head>

<body class="wrap">
  <header>APICloud</header>
</body>
<script type="text/javascript" src="./script/api.js"></script>
<script type="text/javascript">
  var headerH;
  apiready = function() {

        var header = $api.dom('header'); // 获取 header 标签元素
        headerH=$api.offset(header).h;
        // fnNVTabBar_open();
        // openmain();
        openretui()
      };

      function fnNVTabBar_open() {
        var NVTabBar = api.require('NVTabBar');
        NVTabBar.open({
          styles: {
            bg: '#fff',
            h: 54,
            dividingLine: {
              width: 1,
              color: '#E2E2E2'
            },
            badge: {
              bgColor: '#f00',
              numColor: '#000',
              size: 6.0,
              centerY: 2
            }
          },
          items: [{
            w: api.winWidth / 3.0,
            iconRect: {
              w: 25.0,
              h: 25.0,
            },
            icon: {
              normal: 'widget://image/footer/home.png',
              highlight: 'widget://image/footer/home_act.png',
              selected: 'widget://image/footer/home_act.png'
            },
            title: {
              text: '首页',
              size: 12.0,
              normal: '#696969',
              selected: '#000',
              marginB: 6.0,
            }
          }, {
            w: api.winWidth / 3.0,
            iconRect: {
              w: 25.0,
              h: 25.0,
            },
            icon: {
              normal: 'widget://image/footer/groupbuy.png',
              highlight: 'widget://image/footer/groupbuy_act.png',
              selected: 'widget://image/footer/groupbuy_act.png'
            },
            title: {
              text: '热推',
              size: 12.0,
              normal: '#696969',
              selected: '#eb4f38',
              marginB: 6.0
            }
          },{
            w: api.winWidth / 3.0,
            iconRect: {
              w: 25.0,
              h: 25.0,
            },
            icon: {
              normal: 'widget://image/footer/me.png',
              highlight: 'widget://image/footer/me_act.png',
              selected: 'widget://image/footer/me_act.png'
            },
            title: {
              text: '我的',
              size: 12.0,
              normal: '#696969',
              selected: '#eb4f38',
              marginB: 6.0
            }
          }],
          selectedIndex: 0
        }, function(ret, err) {
          if (ret) {

            if (ret.eventType == "show") {
              openmain();
            }
            if (ret.eventType == "click" && ret.index == 0) {
              openmain();
            }
            if (ret.eventType == "click" && ret.index == 1) {
             openretui();
           }
           if (ret.eventType == "click" && ret.index == 2) {
            openmy();
          }

        }
      });
      }
      function openmain(){
        api.openFrame({
          name: 'home_frame',
          url: './html/home_frame.html',
          rect: {
            x: 0,
            y: headerH,
            w: api.winWidth,
            h: api.winHeight-54-headerH
          },
          pageParam: {
            name: 'test'
          },

        });
        // var NVTabBar = api.require('NVTabBar');
        // NVTabBar.bringToFront();
        hiddennewvideo();
        hiddenmy();
      }
      function openretui(){
       api.openFrame({
        name: 'newvideo',
        url: './html/newvideo.html',
        rect: {
          x: 0,
          y: headerH,
          w: api.winWidth,
          h: api.winHeight-54-headerH
        },
        pageParam: {
          name: 'test'
        },

      });
       // var NVTabBar = api.require('NVTabBar');
       // NVTabBar.bringToFront();
       // hiddenhome();
       // hiddenmy();

     }
     function openmy(){
       api.openFrame({
        name: 'my_frame',
        url: './html/my_frame.html',
        rect: {
          x: 0,
          y: 0,
          w: api.winWidth,
          h: api.winHeight-54
        },
        pageParam: {
          name: 'test'
        },

      });
       // var NVTabBar = api.require('NVTabBar');
       // NVTabBar.bringToFront();
       hiddenhome();
       hiddennewvideo();


     }

     function hiddenhome(){
      api.setFrameAttr({
        name: 'home_frame',
        hidden: true
      });
    }
    function hiddennewvideo(){
      api.setFrameAttr({
        name: 'newvideo',
        hidden: true
      });
    }

    function hiddenmy(){
      api.setFrameAttr({
        name: 'my_frame',
        hidden: true
      });
    }
  </script>

  </html>
