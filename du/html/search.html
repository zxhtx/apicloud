<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
	<title>title</title>
	<link rel="stylesheet" type="text/css" href="../css/api.css"/>
	<style>

	header {
		box-sizing: border-box;
		display: -webkit-box;
		display: -webkit-flex;
		display: flex;
		-webkit-box-orient: horizontal;
		-webkit-flex-flow: row;
		flex-flow: row;
		padding: 16px;
		height: 50px;
		width: 100%;
		margin-bottom: 2px;
		background-color: #fff;
		/*border: 1px solid red*/
	}
 header .back {
        position: absolute;
        bottom: -10px;
        left: 0;
        width: 50px;
        height: 50px;
        background: url(../image/back.png);
        background-position: 12px 16px;
        background-size: 11px 18px;
        background-repeat: no-repeat;
    }
	header .input {
		-webkit-box-flex: 1;
		-webkit-flex: 1;
		flex: 1;
		box-sizing: border-box;
		margin-top: 1px;
		margin-left: 18px;
		padding-top: 5px;
		padding-left: 6px;
		padding-right: 6px;
		height: 28px;
		background-color: #eee;
		border-radius: 14px;
		border: 1px solid red
	}

	header .input input {
		width: 100%;
		height: 20px;
		vertical-align:bottom ;
		font-size: 14px;
	}

	header .button {
		box-sizing: border-box;
		width: 80px;
		height: 28px;
		margin-left: 8px;
		line-height: 26px;
		text-align: center;
		font-size: 16px;
		color: #444;
		border-radius: 14px;
		border: 1px solid #aaa;
	}
</style>
</head>
<body>
	<header id="header">
		
		<div class="input">
			<input id="searchText" type="search" placeholder="搜索其实很简单">
		</div>
		<div class="back" tapmode onclick="api.closeWin()"></div>
		<div class="button" tapmode onclick="search()">搜索</div>
	</header>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
	apiready = function(){
		var header=$api.byId('header');
		api.setStatusBarStyle({
			style: 'light',
			color:'#000'
		});
		$api.fixStatusBar(header);
        // 获取header和nav的高
        headerH=$api.offset(header).h
        api.openFrame({
        	name: 'search_frame',
        	url: './search_frame.html',
        	rect: {
        		x: 0,
        		y: headerH,
        		w: 'auto',
        		h: 'auto'
        	},
        	pageParam: {
        		name: 'test'
        	},
        	bounces: true,

        });

    };
    function search(){
    	var searchText=$api.byId('searchText');
    	var searchvalue=searchText.value;
    	var arr = $api.getStorage('history');
    	if (!searchvalue) {
    		api.toast({
    			msg: '请输入搜索关键字',
    			duration: 2000,
    			location: 'bottom'
    		});
    		return;
    	}

    	api.execScript({
    		name: 'search',
    		frameName: 'search_frame',
    		script: "searchval('"+ searchvalue +"')"
    	});

    }
</script>
</html>