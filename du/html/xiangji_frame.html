<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
  <title>title</title>
  <link rel="stylesheet" type="text/css" href="../css/api.css" />
  <style>
  html ,body{
    background-color: transparent;
    /*border: 1px solid red;*/
  }
  #list>.img{
    /*border:1px solid red;*/
  }
/*#list>#icon{
  margin-bottom:20px;
  border-radius: 50%;
  border-color: black; 
  }  */
  
</style>
</head>

<body>
  <div id="list">
    <img class="img" id="zan" tapmode onclick="xiangji()" src="../image/photo.png" alt="" width="28px" height="28px"> 
  </div>

</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
 var dialogBox;
 var camera;
 apiready = function() {
  dialogBox = api.require('dialogBox');
  camera = api.require('zxycamera');



};

function xiangji(){
  api.execScript({
        // name: 'winName',
        frameName: 'caoshi_frame',
        script: 'videopuase();'
      });


  dialogBox.alert({
    texts: {
      title: '拍摄',
      content: '选择拍摄方式',
      leftBtnTitle: '相机',
      rightBtnTitle: '相册'
    },
    styles: {
      bg: '#fff',
      w: 300,
      corner:2,
      title: {
        marginT: 20,
        icon: 'widget://res/gou.png',
        iconSize: 40,
        titleSize: 14,
        titleColor: '#000'
      },
      content: {
        color: '#000',
        size: 14
      },
      left: {
        marginB: 7,
        marginL: 20,
        w: 130,
        h: 35,
        corner: 2,
        bg: '#000000',
        color:'#ffffff',
        size: 12
      },
      right: {
        marginB: 7,
        marginL: 10,
        w: 130,
        h: 35,
        corner: 2,
        bg: '#000000',
        color:'#ffffff',
        size: 12
      }
    }
  }, function(ret) {
    if (ret.eventType == 'left') {

      camera.ttakeVideoClick({
        albumName:'潮袭',
        voideLength:'60'
      },function(ret,err){
        alert(JSON.stringify(ret));  
      });

      dialogBox.close({
        dialogName: 'alert'
      });
    }else{

    api.getPicture({
        sourceType: 'library',
        encodingType: 'jpg',
        mediaValue: 'video',
        destinationType: 'url',
        allowEdit: true,
        quality: 50,
        targetWidth: 100,
        targetHeight: 100,
        saveToPhotoAlbum: false
    }, function(ret, err){ 
        if(ret){
             alert(JSON.stringify(ret));
        }else{
             alert(JSON.stringify(err));
        }
    });
     dialogBox.close({
      dialogName: 'alert'
    });
   }
 });


}



</script>

</html>
