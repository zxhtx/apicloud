<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
  <title>title</title>
  <link rel="stylesheet" type="text/css" href="../css/api.css" />
  <style>
  html ,body{
    background-color: transparent;
    /*border: 1px solid red;*/
  }
  #list{
    height: 20px;
    width: 100%;
    /*border: 1px solid red;*/
  }
  #user{
   font-weight: bold;
   color: white;
   font-size: 16px;
   /*border: 1px solid red;*/
 }
</style>
</head>

<body>
  <div id="list">

   <div id="user"></div>
   
 </div>

</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/SHA1.js"></script>
<script type="text/javascript">
  var count;
  apiready = function() {
    count=0;
    getuser();

  };
  function getuser(ret){




    api.addEventListener({
      name: 'userandtext'
    }, function(ret, err){
      if( ret ){
       getusername(ret.value.key1.userid)
     }
   });
  }

  function getusername(ele){
    var user=$api.byId('user');
       if (ele.chaoshiuser==null || ele.chaoshiuser== undefined ||  ele.chaoshiuser=='') {
        user.innerHTML='@'+ele.username;
      }else{
        var username='@'+ele.chaoshiuser;
        user.innerHTML=username.substr(0,11);

      }
}


</script>

</html>
